## 降噪标定
分别在不同环境下和不同isp-denoise参数下抓图并比较：  
denoise1.65后  
1. 会议室开灯：噪点明显减少（墙纸），但某些细节被当做噪点模糊（墙上芯片模型）  
    补充：标定结果可以使墙上弱纹理线更直  
2. 会议室关灯：关灯下的大面积噪点变规律（类似磨皮）  
3. 室外阴天：一些明显的黑色噪点被去除（树冠部分）  
    补充：墙边色彩噪声更小(楼下平台)  
4. 办公室开灯：细节噪点变规律（变干净）  
    补充：细节更好，噪点呈现方式更柔和

问题：标定时间  
> 虽然标定时间比较长，但是可以同时选择多个ISO，工具会自己按照顺序把全部ISO一次性标完，喝杯茶再回去看标定结果。 可以统计一下时间。  

**下一次标定步骤可以这样：**   
1. 关闭掉所有模块，只打开SO，AWB，WB。 先自己手动设置曝光和增益，固定到一倍增益然后提高曝光，检查在一倍增益下最亮块的亮度能否达到220左右，如果达不到，那么需要切换亮度更高的光源或者另外补光。（一倍增益下图像能达到标定的要求，基本其他增益下都能达到）  
2. 一次勾选好需要标定的ISO，点击calc。  
3. 标定结束后把ISO100的曲线填入BDNF里面，其他ISO换算一个基于ISP100曲线比例，叠加到black gain和white gain中。  

>拿2M和8M的继续这个实验  
>找出百分比和剩余时间的大概对应关系  


## 更换sensor驱动，测试抓图正常
> 客户需求：黑白摄像头更换为彩色摄像头之后，图像效果不好。  

> 原因：当前使用的还是黑白摄像头的驱动，需要更换为为彩色摄像头的驱动，即修改驱动的寄存器配置为彩色摄像头配置。    

1. 从个人服务器跳转到aw服务器，映射到本地，打开modules/sensor固件文件夹，修改驱动后替换掉原来的驱动文件（原来的驱动文件需要重命名备份以免被覆盖）。  
2. 在编译服务器上配置编译lichee（编译报错则修改驱动文件），编译Android，报错，重新编译，报错，发现lichee和Android配置的不对应，尝试都用s100，编译成功，打包Android固件（安全固件），烧写固件进设备，打开设备，发现无法出图。（注意环境编译和脚本编译的区别）  
3. dmesg查看log检查错误，lsmod发现加载的驱动模块不对，可能是设备设置开机自动加载了其他驱动模块，修改设备的脚本文件。  
4. 在编译服务器重新编译和打包，固件烧录进设备。打开设备，还是无法出图，打开相机就卡死。再次检查驱动，驱动是正确的，reboot重启，还是无法出图。  

> 问题：客户设备无法出图  
> s100的dts文件的默认sensor没有改成..._mipi  

> DTS：  
> DTS即Device Tree Source 设备树源码，Device Tree是一种描述硬件的数据结构  
> Device Tree可以描述的信息包括CPU的数量和类别、内存基地址和大小、总线和桥、外设连接、中断控制器和中断使用情况、GPIO控制器和GPIO使用情况、Clock控制器和Clock使用情况。  
> [Linux驱动开发23之设备树dts的由来及部分属性](https://blog.csdn.net/wangdapao12138/article/details/82930081)  

